{"remainingRequest":"/Users/xiaofei.bao/Desktop/vue/keywords-advantage-list/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xiaofei.bao/Desktop/vue/keywords-advantage-list/src/container/keywords-advantage/keywords-advantage.vue?vue&type=style&index=0&id=14458ed8&lang=less&scoped=true&","dependencies":[{"path":"/Users/xiaofei.bao/Desktop/vue/keywords-advantage-list/src/container/keywords-advantage/keywords-advantage.vue","mtime":1633745468224},{"path":"/Users/xiaofei.bao/Desktop/vue/keywords-advantage-list/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xiaofei.bao/Desktop/vue/keywords-advantage-list/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/xiaofei.bao/Desktop/vue/keywords-advantage-list/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/xiaofei.bao/Desktop/vue/keywords-advantage-list/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xiaofei.bao/Desktop/vue/keywords-advantage-list/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xiaofei.bao/Desktop/vue/keywords-advantage-list/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5yb3cgewogIGRpc3BsYXk6IGZsZXg7Cn0KLmltcG9ydC1pdGVtLWJ0biB7CiAgbWFyZ2luLXJpZ2h0OiA0MHB4Owp9Ci5saXN0LWVkaXRvciB7CiAgLnRpdGxlLAogIC5mZWF0dXJlIHsKICAgIG1hcmdpbi1ib3R0b206IDEwcHggIWltcG9ydGFudDsKICB9Cn0KLm1lbnUtdGl0bGUgewogIGNvbG9yOiAjMTExOwogIGZvbnQtc2l6ZTogMTJweDsKfQoubWFpbiB7CiAgZm9udC1zaXplOiAxNHB4OwogIHBhZGRpbmctcmlnaHQ6IDE1cHg7CiAgcGFkZGluZy1sZWZ0OiAxNXB4OwogIGhlaWdodDogMTAwJTsKICBvdmVyZmxvdzogYXV0bzsKCiAgLmxlZnQgewogICAgZmxleDogMSAxIDUwJTsKICAgIG1hcmdpbi10b3A6IDQwcHg7CgogICAgLmxpc3QtY29udGFpbmVyIHsKICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsKICAgICAgbWFyZ2luLXRvcDogNHB4OwogICAgICBtaW4taGVpZ2h0OiAyMDBweDsKICAgICAgb3ZlcmZsb3c6IGF1dG87CgogICAgICAuZHJhZ2dhYmxlIHsKICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjY2VkNGRhOwogICAgICB9CgogICAgICAuY2VsbC1jb250YWluZXIgewogICAgICAgIGhlaWdodDogNDZweDsKICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjEyNTI5OwogICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICBib3JkZXItdG9wOiAwLjVweCBzb2xpZCAjMzIzODNlOwoKICAgICAgICAudGl0bGUgewogICAgICAgICAgdGV4dC1hbGlnbjogbGVmdDsKICAgICAgICAgIG1hcmdpbi1sZWZ0OiAxMHB4OwogICAgICAgICAgbWFyZ2luLXJpZ2h0OiA4cHg7CiAgICAgICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgICAgICBjb2xvcjogI2ZmZjsKICAgICAgICB9CiAgICAgICAgLmJhZGdlLXR4dCB7CiAgICAgICAgICBtYXJnaW4tbGVmdDogM3B4OwogICAgICAgICAgcGFkZGluZzogM3B4OwogICAgICAgICAgZm9udC1zaXplOiAxMnB4OwogICAgICAgIH0KICAgICAgICAuYmFkZ2UtbGlnaHQgewogICAgICAgICAgY29sb3I6ICMxMTE7CiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOWZhOwogICAgICAgIH0KICAgICAgICAuYmFkZ2Utc3VjY2VzcyB7CiAgICAgICAgICBjb2xvcjogI2ZmZjsKICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMyOGE3NDU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAuYWRkLWl0ZW0tYnRuIHsKICAgICAgbWFyZ2luLXRvcDogMTJweDsKICAgICAgbWFyZ2luLWJvdHRvbTogMTJweDsKICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgfQogIH0KCiAgLmtleXdvcmQtY29udGFpbmVyIHsKICAgIHBhZGRpbmctbGVmdDogMTVweDsKICAgIGZsZXg6IDEgMSA1MCU7CiAgICBtYXJnaW4tYm90dG9tOiAyMHB4OwogIH0KICBAbWVkaWEgKG1pbi1oZWlnaHQ6IDQwMHB4KSB7CiAgICAubGlzdC1jb250YWluZXIgewogICAgICBtYXgtaGVpZ2h0OiAyNzVweDsKICAgIH0KICB9CiAgQG1lZGlhIChtaW4taGVpZ2h0OiA1NzVweCkgewogICAgLmxpc3QtY29udGFpbmVyIHsKICAgICAgbWF4LWhlaWdodDogMzc1cHg7CiAgICB9CiAgfQogIEBtZWRpYSAobWluLWhlaWdodDogNzY3cHgpIHsKICAgIC5saXN0LWNvbnRhaW5lciB7CiAgICAgIG1heC1oZWlnaHQ6IDU3NXB4OwogICAgfQogIH0KICBAbWVkaWEgKG1pbi1oZWlnaHQ6IDg1MHB4KSB7CiAgICAubGlzdC1jb250YWluZXIgewogICAgICBtYXgtaGVpZ2h0OiA2NzVweDsKICAgIH0KICB9CiAgQG1lZGlhIChtaW4taGVpZ2h0OiA5MDBweCkgewogICAgLmxpc3QtY29udGFpbmVyIHsKICAgICAgbWF4LWhlaWdodDogNzc1cHg7CiAgICB9CiAgfQogIEBtZWRpYSAobWF4LXdpZHRoOiA5ODBweCkgewogICAgLnJvdyB7CiAgICAgIGRpc3BsYXk6IGJsb2NrOwogICAgfQogIH0KfQo="},{"version":3,"sources":["keywords-advantage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"keywords-advantage.vue","sourceRoot":"src/container/keywords-advantage","sourcesContent":["<template>\n  <div class=\"main\">\n    <div class=\"common-page-head\">\n      <p class=\"common-page-head-title\">阿里国际站产品标题助手v1.0</p>\n      <!-- <p class=\"common-page-head-title\">标题</p> -->\n    </div>\n    <div class=\"row\">\n      <div class=\"left\">\n        <div class=\"eni-flex\">\n          <el-button size=\"small\" type=\"primary\" plain @click=\"handleSort\">按字母排序</el-button>\n        </div>\n        <div class=\"eni-flex\" style=\"margin-top: 10px; padding-right: 10px\">\n          <p class=\"menu-title eni-w35\">关键词</p>\n          <p class=\"menu-title eni-flex-item\">搜索量</p>\n          <p class=\"menu-title eni-flex-item\">点击率</p>\n          <p class=\"menu-title eni-flex-item\">出现次数</p>\n          <p class=\"menu-title eni-flex-item\">使用次数</p>\n          <p class=\"menu-title eni-w20 eni-text-center\">出现位置</p>\n          <p class=\"menu-title eni-w5\">操作</p>\n        </div>\n        <div class=\"list-container\">\n          <draggable\n            class=\"draggable\"\n            v-model=\"keywordsArray\"\n            @start=\"drag = true\"\n            @end=\"drag = false\"\n          >\n            <div :key=\"index\" class=\"cell-container\" v-for=\"(e,index) in keywordsArray\">\n              <p class=\"eni-padding-wrap eni-white eni-w35\">{{e.name}}</p>\n              <p class=\"eni-padding-wrap eni-white eni-flex-item eni-text-center\">{{e.search}}</p>\n              <p class=\"eni-padding-wrap eni-white eni-flex-item eni-text-center\">{{e.click}}</p>\n              <p class=\"eni-padding-wrap eni-white eni-flex-item eni-text-center\">{{e.appear}}</p>\n              <p class=\"eni-padding-wrap eni-white eni-flex-item eni-text-center\">{{e.use}}</p>\n              <div class=\"eni-padding-wrap eni-flex eni-w20 eni-j-center\">\n                <p class=\"badge-txt badge-light\" :class=\"{'badge-success':e.isTitleHas}\">标</p>\n                <p class=\"badge-txt badge-light\" :class=\"{'badge-success':e.isFeatureHas}\">词</p>\n                <p class=\"badge-txt badge-light\" :class=\"{'badge-success':e.isDescHas}\">描</p>\n              </div>\n              <el-button\n                icon=\"el-icon-delete\"\n                class=\"eni-w5\"\n                style=\"border:none; background:none; color:red;\"\n                @click=\"handleDelete(index)\"\n              ></el-button>\n            </div>\n          </draggable>\n        </div>\n        <el-button class=\"add-item-btn\" type=\"primary\" icon=\"el-icon-plus\" size=\"small\">\n          导入CSV文件\n          <input\n            type=\"file\"\n            ref=\"refFile\"\n            style=\"opacity:0;position:absolute;width:100%;height:100%;top:0;left:0\"\n            @change=\"handleImportCSV\"\n          />\n        </el-button>\n      </div>\n      <div class=\"keyword-container\">\n        <el-tabs v-model=\"activeTab\">\n          <el-tab-pane label=\"TKD\" name=\"tab-first\">\n            <div class=\"list-editor\">\n              <Title class=\"title\" v-model=\"editor.title\" />\n              <Feature\n                class=\"feature\"\n                :key=\"idx\"\n                :title=\"e.title\"\n                :inputHeight=\"e.inputHeight\"\n                :placeHolder=\"e.placeHolder\"\n                v-for=\"(e,idx) in editor.features\"\n                v-model=\"e.value\"\n              />\n            </div>\n          </el-tab-pane>\n          <el-tab-pane label=\"关键词预处理\" name=\"tab-second\">\n            <div>\n              <div class=\"eni-flex\">\n                <EditorInput v-model=\"editor.input\" title=\"输入\" />\n                <div style=\"width: 30px\"></div>\n                <EditorInput v-model=\"editor.out\" title=\"输出\" />\n              </div>\n              <div class=\"eni-s-between\" style=\"margin-top: 10px\">\n                <el-button type=\"primary\" icon=\"el-icon-copy\" size=\"small\" @click=\"handleTidy\">整理</el-button>\n                <el-button\n                  class=\"import-item-btn\"\n                  type=\"primary\"\n                  icon=\"el-icon-copy\"\n                  size=\"small\"\n                  @click=\"addInList\"\n                >导入到列表中</el-button>\n              </div>\n            </div>\n          </el-tab-pane>\n        </el-tabs>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport draggable from \"vuedraggable\";\nimport Title from \"./title\";\nimport Feature from \"./feature\";\nimport EditorInput from \"./editor-input\";\nimport Papa from \"papaparse\";\nimport jschardet from \"jschardet\";\n\nexport default {\n  components: { draggable, Title, Feature, EditorInput },\n  data() {\n    return {\n      activeTab: \"tab-first\",\n      keywordsArray: [],\n      editor: {\n        title: \"\",\n        input: \"\",\n        out: \"\",\n        features: [\n          {\n            title: \"关键词1\",\n            value: \"\",\n            placeHolder: \"请输入关键词\"\n          },\n          {\n            title: \"关键词2\",\n            value: \"\",\n            placeHolder: \"请输入关键词\"\n          },\n          {\n            title: \"关键词3\",\n            value: \"\",\n            placeHolder: \"请输入关键词\"\n          },\n          {\n            title: \"产品描述\",\n            value: \"\",\n            inputHeight: \"25vh\",\n            placeHolder: \"请输入产品描述\"\n          }\n        ]\n      }\n    };\n  },\n  watch: {\n    editor: {\n      handler: function(val) {\n        //FIXME: 输入、输出不进行下面的代码\n        this._countRefer(val);\n      },\n      deep: true\n    }\n  },\n  methods: {\n    handleImportCSV() {\n      let selectedFile = null;\n      selectedFile = this.$refs.refFile.files[0];\n      if (selectedFile === undefined) {\n        return;\n      }\n      var reader = new FileReader();\n      reader.readAsDataURL(selectedFile);\n      reader.onload = evt => {\n        // 检查编码\n        let encoding = this._checkEncoding(evt.target.result);\n        // 将csv转换成二维数组\n        Papa.parse(selectedFile, {\n          encoding: encoding,\n          complete: res => {\n            // UTF8 \\r\\n与\\n混用时有可能会出问题\n            let data = res.data;\n            if (data[data.length - 1] == \"\") {\n              //去除最后的空行\n              data.pop();\n            }\n            this._parseCSVData(data);\n          }\n        });\n      };\n    },\n    handleDelete(index) {\n      this.keywordsArray.splice(index, 1);\n    },\n    addInList() {\n      if (this.editor.out) {\n        let out = this.editor.out.replace(/\\n+/g, \"\\n\");\n        let outArr = out.split(\"\\n\");\n        outArr.forEach(e => {\n          this.keywordsArray.push({\n            name: e,\n            use: 0,\n            click: 0,\n            search: 0,\n            appear: 0,\n            isTitleHas: false,\n            isFeatureHas: false,\n            isDescHas: false\n          });\n        });\n        this._countRefer(this.editor);\n      }\n    },\n    handleSort() {\n      if (this.keywordsArray.length == 0) return;\n      var s = this.keywordsArray.sort(this._sortKeysArray);\n      this.keywordsArray = s;\n    },\n    added() {\n      console.log(\"added\");\n    },\n    removed() {\n      console.log(\"removed\");\n    },\n    moved() {\n      console.log(\"moved\");\n    },\n    handleFeatureInput(title) {\n      this.myArray.forEach(e => {\n        const match = this._match(title, e.name);\n        e.isFeatureHas = match != null;\n      });\n    },\n    handleTidy() {\n      let out = this.editor.input.replace(/\\s+/g, \" \");\n      out = out.split(\" \").join(\"\\n\");\n      out = out.trim();\n      this.$set(this.editor, \"out\", out);\n    },\n    _match(s, re) {\n      let newRe = re\n        .replace(/\\(/g, \"\\\\(\")\n        .replace(/\\)/g, \"\\\\)\")\n        .replace(/\\//g, \"////\");\n      newRe = eval(\"/\" + newRe + \"/ig\");\n      return s.match(newRe);\n    },\n    _sortKeysArray(x, y) {\n      let a = x.name.toLowerCase();\n      let b = y.name.toLowerCase();\n      if (a < b) return -1;\n      if (a > b) return 1;\n      return 0;\n    },\n    _parseCSVData(data) {\n      console.log(data);\n      var titleDic = {\n        关键词: \"name\",\n        搜索量: \"search\",\n        点击率: \"click\",\n        出现次数: \"appear\"\n      };\n      var titleArr = [];\n      data[0].forEach(e => {\n        titleArr.push(titleDic[e]);\n      });\n      data.splice(0, 1);\n      var newList = [];\n      data.forEach(e => {\n        var model = {\n          name: \"\",\n          use: 0,\n          click: 0,\n          search: 0,\n          appear: 0,\n          isTitleHas: false,\n          isFeatureHas: false,\n          isDescHas: false\n        };\n        e.forEach((m, idx) => {\n          model[titleArr[idx]] = m;\n        });\n        newList.push(model);\n      });\n      this.keywordsArray = newList;\n    },\n    _checkEncoding(base64Str) {\n      // 这种方式得到的是一种二进制串\n      let str = atob(base64Str.split(\";base64,\")[1]);\n      // 要用二进制格式\n      let encoding = jschardet.detect(str);\n      encoding = encoding.encoding;\n      if (encoding == \"windows-1252\") {\n        // 有时会识别错误（如UTF8的中文二字）\n        encoding = \"ANSI\";\n      }\n      return encoding;\n    },\n    _countRefer(val) {\n      this.keywordsArray.forEach(e => {\n        let match = this._match(val.title, e.name);\n        let titleCount = match ? match.length : 0;\n        e.isTitleHas = match != null;\n\n        let featureCount = 0;\n        val.features.forEach(fe => {\n          match = this._match(fe.value, e.name);\n          if (match) {\n            featureCount += match.length;\n          }\n        });\n        e.isFeatureHas = featureCount != 0;\n        e.use = titleCount + featureCount;\n      });\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.row {\n  display: flex;\n}\n.import-item-btn {\n  margin-right: 40px;\n}\n.list-editor {\n  .title,\n  .feature {\n    margin-bottom: 10px !important;\n  }\n}\n.menu-title {\n  color: #111;\n  font-size: 12px;\n}\n.main {\n  font-size: 14px;\n  padding-right: 15px;\n  padding-left: 15px;\n  height: 100%;\n  overflow: auto;\n\n  .left {\n    flex: 1 1 50%;\n    margin-top: 40px;\n\n    .list-container {\n      background-color: #fff;\n      margin-top: 4px;\n      min-height: 200px;\n      overflow: auto;\n\n      .draggable {\n        border: 1px solid #ced4da;\n      }\n\n      .cell-container {\n        height: 46px;\n        background-color: #212529;\n        display: flex;\n        align-items: center;\n        border-top: 0.5px solid #32383e;\n\n        .title {\n          text-align: left;\n          margin-left: 10px;\n          margin-right: 8px;\n          font-size: 14px;\n          color: #fff;\n        }\n        .badge-txt {\n          margin-left: 3px;\n          padding: 3px;\n          font-size: 12px;\n        }\n        .badge-light {\n          color: #111;\n          background-color: #f8f9fa;\n        }\n        .badge-success {\n          color: #fff;\n          background-color: #28a745;\n        }\n      }\n    }\n    .add-item-btn {\n      margin-top: 12px;\n      margin-bottom: 12px;\n      position: relative;\n    }\n  }\n\n  .keyword-container {\n    padding-left: 15px;\n    flex: 1 1 50%;\n    margin-bottom: 20px;\n  }\n  @media (min-height: 400px) {\n    .list-container {\n      max-height: 275px;\n    }\n  }\n  @media (min-height: 575px) {\n    .list-container {\n      max-height: 375px;\n    }\n  }\n  @media (min-height: 767px) {\n    .list-container {\n      max-height: 575px;\n    }\n  }\n  @media (min-height: 850px) {\n    .list-container {\n      max-height: 675px;\n    }\n  }\n  @media (min-height: 900px) {\n    .list-container {\n      max-height: 775px;\n    }\n  }\n  @media (max-width: 980px) {\n    .row {\n      display: block;\n    }\n  }\n}\n</style>"]}]}